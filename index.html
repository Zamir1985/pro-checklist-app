<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <title>PRO Trend Verification Map V2 â€” Offline Checklist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --card: #0b1120;
      --card-soft: #111827;
      --accent: #fbbf24;
      --accent-soft: #6b7280;
      --danger: #f97373;
      --success: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827, #020617);
      color: var(--text);
      padding: 8px;
    }
    .app {
      max-width: 900px;
      margin: 0 auto 32px auto;
    }
    h1 {
      font-size: 1.25rem;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 10px;
      line-height: 1.35;
    }
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }
    .pill {
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 0.68rem;
      border: 1px solid #374151;
      color: var(--muted);
    }
    .pill.critical { border-color: var(--accent); color: var(--accent); }
    .top-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      margin-bottom: 8px;
      font-size: 0.75rem;
    }
    .btn {
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: transparent;
      color: var(--text);
      padding: 4px 10px;
      font-size: 0.72rem;
      cursor: pointer;
    }
    .btn.primary {
      border-color: var(--accent);
      background: linear-gradient(135deg, #fbbf24, #f97316);
      color: #020617;
      font-weight: 600;
    }
    .btn.small { padding: 3px 8px; font-size: 0.68rem; }
    .score-bar {
      margin-top: 2px;
      color: var(--muted);
    }
    .score-value {
      font-weight: 600;
      color: var(--accent);
    }
    .hf-flag {
      margin-left: 6px;
      font-size: 0.72rem;
    }
    .hf-ok { color: var(--success); }
    .hf-bad { color: var(--danger); }

    .sections {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .section {
      background: linear-gradient(135deg, rgba(15,23,42,0.96), rgba(15,23,42,0.8));
      border-radius: 12px;
      padding: 6px 8px 7px;
      border: 1px solid #111827;
    }
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
      cursor: pointer;
    }
    .section-title {
      font-size: 0.85rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .badge {
      font-size: 0.62rem;
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid #374151;
      color: var(--muted);
      white-space: nowrap;
    }
    .badge.critical { border-color: var(--accent); color: var(--accent); }
    .section-score {
      font-size: 0.7rem;
      color: var(--muted);
      white-space: nowrap;
    }
    .collapse-icon {
      font-size: 0.7rem;
      color: var(--muted);
      margin-left: 4px;
    }
    .items {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .section.collapsed .items {
      display: none;
    }
    .section.collapsed .collapse-icon {
      transform: rotate(-90deg);
      opacity: 0.7;
    }

    .item {
      background: var(--card);
      border-radius: 9px;
      padding: 5px 6px;
      border: 1px solid #020617;
    }
    .item-title {
      font-size: 0.75rem;
      font-weight: 600;
      margin-bottom: 1px;
    }
    .item-desc {
      font-size: 0.68rem;
      color: var(--muted);
      margin-bottom: 4px;
      line-height: 1.25;
    }
    .item-actions {
      display: flex;
      gap: 3px;
      flex-wrap: nowrap;
    }
    .item-btn {
      flex: 1;
      font-size: 0.64rem;
      padding: 2px 3px;
      border-radius: 999px;
      border: 1px solid #374151;
      background: #020617;
      color: var(--muted);
      cursor: pointer;
      white-space: nowrap;
    }
    .item-btn.active-support {
      border-color: var(--success);
      background: rgba(34,197,94,0.16);
      color: #bbf7d0;
    }
    .item-btn.active-neutral {
      border-color: var(--accent-soft);
      background: rgba(107,114,128,0.22);
      color: #e5e7eb;
    }
    .item-btn.active-against {
      border-color: var(--danger);
      background: rgba(249,115,115,0.18);
      color: #fee2e2;
    }
    .item-footer {
      margin-top: 2px;
      font-size: 0.64rem;
      color: #6b7280;
    }
    .item-hardfail-flag {
      font-size: 0.6rem;
      color: var(--danger);
      font-weight: 600;
      margin-left: 4px;
    }

    .final-card {
      margin-top: 10px;
      padding: 8px;
      border-radius: 12px;
      background: radial-gradient(circle at top left, #020617, #020617);
      border: 1px solid #4b5563;
    }
    .final-title {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 3px;
    }
    .final-score-line {
      font-size: 0.75rem;
      margin-bottom: 3px;
    }
    .final-verdict {
      font-size: 0.85rem;
      font-weight: 700;
      margin-bottom: 3px;
    }
    .final-note {
      font-size: 0.7rem;
      color: var(--muted);
      line-height: 1.3;
    }
    .export-box {
      margin-top: 7px;
      background: #020617;
      border-radius: 9px;
      border: 1px solid #111827;
      padding: 5px;
    }
    .export-box textarea {
      width: 100%;
      min-height: 80px;
      border-radius: 7px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--muted);
      font-size: 0.68rem;
      padding: 4px;
      resize: vertical;
    }
    .export-label {
      font-size: 0.68rem;
      color: var(--muted);
      margin-bottom: 3px;
    }
    @media (max-width: 600px) {
      .section-header { flex-direction: row; align-items: center; }
      .top-bar { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>
<div class="app">
  <h1>PRO Trend Verification Map â€” FULL MODE V2</h1>
  <div class="subtitle">
    START siqnalÄ±ndan sonra 10â€“20 saniyÉ™yÉ™ bÃ¼tÃ¼n PRO xÉ™ritÉ™ni yoxlamaq Ã¼Ã§Ã¼n offline checklist.
    V2: Hard-Fail sistemi, kompakt UI, collapse bÃ¶lmÉ™lÉ™r, Telegram export.
  </div>

  <div class="pill-row">
    <div class="pill critical">0. QÉ™rar filteri â†’ yalnÄ±z gÃ¼clÃ¼ impulslar</div>
    <div class="pill">BÃ¶lmÉ™ 1: Futures Real Impulse (8)</div>
    <div class="pill">BÃ¶lmÉ™ 2: Spot Confirmation (4)</div>
    <div class="pill">BÃ¶lmÉ™ 3: Extra PRO (6)</div>
    <div class="pill">BÃ¶lmÉ™ 4: Market Structure (2)</div>
    <div class="pill">BÃ¶lmÉ™ 5: BTC Regime (1)</div>
  </div>

  <div class="top-bar">
    <div style="display:flex;gap:6px;flex-wrap:wrap;">
      <button class="btn primary" onclick="resetAll()">Reset All</button>
      <button class="btn small" onclick="exportSummary()">Copy Export</button>
    </div>
    <div class="score-bar">
      Overall Score: <span id="overallScore" class="score-value">0</span> / 21
      <span id="hfStatus" class="hf-flag hf-ok">Hard-Fail: Yox</span>
    </div>
  </div>

  <div class="sections">

    <!-- SECTION 0 â€” DECISION FILTER (text only, collapsible) -->
    <div class="section">
      <div class="section-header">
        <div class="section-title">
          ğŸ”µ 0. QÉ™rar Filteri
          <span class="badge critical">Ä°lk 5â€“10 saniyÉ™</span>
        </div>
        <div class="section-score">
          <span class="collapse-icon">â–¼</span>
        </div>
      </div>
      <div class="items">
        <div style="font-size:0.72rem;color:var(--muted);line-height:1.35;">
          START siqnalÄ±ndan sonra Ã¶zÃ¼ndÉ™n soruÅŸ:
          <br>â€¢ Bu siqnal range zibili iÃ§indÉ™dir, yoxsa aÃ§Ä±q impulsdadÄ±r?
          <br>â€¢ SaniyÉ™lÉ™r iÃ§indÉ™ &gt; THRESHOLD hÉ™rÉ™kÉ™t + gÃ¼clÃ¼ volume var?
          <br>ÆgÉ™r cavabÄ±n â€œbilmirÉ™mâ€dirsÉ™ â†’ <b>hÉ™lÉ™ heÃ§ nÉ™ etmÉ™</b>, aÅŸaÄŸÄ±dakÄ± bÃ¶lmÉ™lÉ™ri doldur, sonra qÉ™rar ver.
        </div>
      </div>
    </div>

    <!-- SECTION 1 â€” FUTURES IMPULSE -->
    <div class="section" data-section="1">
      <div class="section-header">
        <div class="section-title">
          ğŸŸ¦ BÃ¶lmÉ™ 1 â€” Futures REAL Impulse Check
          <span class="badge critical">Æn vacib 8 punkt</span>
        </div>
        <div class="section-score">
          Score: <span class="score-value" id="score-sec-1">0</span> / 8
          <span class="collapse-icon">â–¼</span>
        </div>
      </div>
      <div class="items">

        <div class="item" data-id="1">
          <div class="item-title">1) Taker Buy/Sell Flow (Î” Taker)</div>
          <div class="item-desc">
            Bullish: Taker Buy Ã¼stÃ¼n, yaÅŸÄ±l spike, buy &gt; ~55â€“60%.<br>
            Kritik: Price â†‘ amma taker buy zÉ™if vÉ™ ya sell dominant â†’ fake pump riski.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Supports Trade</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / unclear</button>
            <button class="item-btn" onclick="setScore(this,-1)">Against Trade</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Time&Sales + Taker qrafikindÉ™ real alÄ±cÄ±larÄ±n girib-girmÉ™diyini hiss et.</div>
        </div>

        <div class="item" data-id="2">
          <div class="item-title">2) Basis (Futures vs Spot Premium)</div>
          <div class="item-desc">
            Bullish: Basis yÃ¼ngÃ¼lcÉ™ â†‘ vÉ™ 0-dan yuxarÄ±, funding normal.<br>
            Kritik: Price â†‘ amma basis sabit / Ã§ox yÃ¼ksÉ™k â†’ futâ†’spot manipulyasiya vÉ™ ya trend yorÄŸunluÄŸu.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Supports Trade</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral</button>
            <button class="item-btn" onclick="setScore(this,-1)">Against Trade</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Fut/spot fÉ™rqi â€œyanmÄ±rsaâ€, spot demand daha realdÄ±r.</div>
        </div>

        <div class="item" data-id="3">
          <div class="item-title">3) OI / Market Cap Ratio</div>
          <div class="item-desc">
            Bullish: Ratio stabil vÉ™ ya artan; flash spike sonra sakit â†’ institution load.<br>
            Kritik: Price â†‘ amma OI/MC â†“ vÉ™ ya ratio Ã§ox yÃ¼ksÉ™k â†’ trend bitmÉ™ / liquidation hunt riski.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Supports Trade</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral</button>
            <button class="item-btn" onclick="setScore(this,-1)">Against Trade</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Ratio qrafikindÉ™ trendin â€œsaÄŸlamâ€ gÃ¶rÃ¼nmÉ™sini izlÉ™.</div>
        </div>

        <div class="item" data-id="4" data-hardfail="true">
          <div class="item-title">
            4) OI Dynamics â€” 4 DavranÄ±ÅŸ
            <span class="item-hardfail-flag">HARD-FAIL potensialÄ±</span>
          </div>
          <div class="item-desc">
            â†‘OI + â†‘Price â†’ real trend (davam);<br>
            â†‘OI + â†“Price â†’ leverage trap (SHORT);<br>
            â†“OI + â†‘Price â†’ short squeeze (LONG);<br>
            â†“OI + â†“Price â†’ trend bitir (Ã§Ä±x/etmÉ™).
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Supports Trade Setup</button>
            <button class="item-btn" onclick="setScore(this,0)">Mixed / unclear</button>
            <button class="item-btn" onclick="setScore(this,-1)">Contradicts Setup (Trap)</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: SÉ™nin planladÄ±ÄŸÄ±n LONG/SHORT yÃ¶nÃ¼ ilÉ™ bu cÉ™dvÉ™li uyÄŸunlaÅŸdÄ±r.</div>
        </div>

        <div class="item" data-id="5">
          <div class="item-title">5) Notional OI</div>
          <div class="item-desc">
            Bullish: Notional + Price sinxron, notional spike â†’ institution load.<br>
            Kritik: Price â†‘ amma Notional stabil â†’ zÉ™if trend / retail-only impuls.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Supports Trade</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral</button>
            <button class="item-btn" onclick="setScore(this,-1)">Against Trade</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Pullu OI (notional) price ilÉ™ É™l-É™lÉ™ gedirmi?</div>
        </div>

        <div class="item" data-id="6">
          <div class="item-title">6) Top Trader Account Ratio (Retail davranÄ±ÅŸÄ±)</div>
          <div class="item-desc">
            Bullish impulse Ã¼Ã§Ã¼n ideal: Retail short-heavy (Acct &lt; 0.90).<br>
            Kritik: Acct &gt; 1.15 (hamÄ± long) â†’ FOMO, gec giriÅŸ tÉ™hlÃ¼kÉ™li.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Retail mÉ™nÉ™ qarÅŸÄ± (yaxÅŸÄ±)</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / normal</button>
            <button class="item-btn" onclick="setScore(this,-1)">Retail mÉ™nimlÉ™ eyni tÉ™rÉ™fdÉ™ (risk)</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Retail sÉ™nin tÉ™rÉ™finÉ™ nÉ™ qÉ™dÉ™r yÄ±ÄŸÄ±ÅŸÄ±b, nÉ™ qÉ™dÉ™r qarÅŸÄ±dadÄ±r?</div>
        </div>

        <div class="item" data-id="7">
          <div class="item-title">7) Top Trader Position Ratio (Pro davranÄ±ÅŸÄ±)</div>
          <div class="item-desc">
            Pro Ã¼Ã§Ã¼n qÄ±zÄ±l: Pos L/S &gt; 1.05 (long yÄ±ÄŸÄ±r) vÉ™ ya &lt; 0.95 (short yÄ±ÄŸÄ±r).<br>
            Kritik: Account vÉ™ Position arasÄ±nda ziddiyyÉ™t varsa â†’ ehtiyatlÄ± ol.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Pros align with my side</button>
            <button class="item-btn" onclick="setScore(this,0)">Mixed / divergence</button>
            <button class="item-btn" onclick="setScore(this,-1)">Pros opposite side</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Pro-lar sÉ™ninlÉ™ eyni tÉ™rÉ™fdÉ™dirsÉ™, siqnalÄ±n dÉ™yÉ™ri xeyli artÄ±r.</div>
        </div>

        <div class="item" data-id="8">
          <div class="item-title">8) Global L/S Ratio (Market mood)</div>
          <div class="item-desc">
            Bullish: Global &gt; 1 â†’ mood pozitiv.<br>
            Bearish risk: Global &lt; 1 â†’ Ã¼mumi sentiment zÉ™ifdir.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Global mood dÉ™stÉ™yir</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / balanslÄ±</button>
            <button class="item-btn" onclick="setScore(this,-1)">Global mood É™leyhinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Altcoin siqnalÄ±nÄ± global mood-lan kÉ™siÅŸ.</div>
        </div>

      </div>
    </div>

    <!-- SECTION 2 â€” SPOT CONFIRMATION -->
    <div class="section" data-section="2">
      <div class="section-header">
        <div class="section-title">
          ğŸŸ© BÃ¶lmÉ™ 2 â€” Spot Confirmation (4 blok)
          <span class="badge">Trend davamÄ± Ã¼Ã§Ã¼n tÉ™sdiq</span>
        </div>
        <div class="section-score">
          Score: <span class="score-value" id="score-sec-2">0</span> / 4
          <span class="collapse-icon">â–¼</span>
        </div>
      </div>
      <div class="items">

        <div class="item" data-id="9">
          <div class="item-title">BLOCK 1 â€” Spot Money Flow</div>
          <div class="item-desc">
            Bullish: Net inflow, spot buy walls, alÄ±cÄ±larÄ±n real gÃ¶rÃ¼nmÉ™si.<br>
            Bearish: Net outflow, sell walls, likvidlikdÉ™n qaÃ§Ä±ÅŸ.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Spot money mÉ™nim tÉ™rÉ™fimdÉ™dir</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / zÉ™if</button>
            <button class="item-btn" onclick="setScore(this,-1)">Money flow É™leyhinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Spot tab-da net inflow/outflow vÉ™ walls-a bax.</div>
        </div>

        <div class="item" data-id="10">
          <div class="item-title">BLOCK 2 â€” Spot Volume</div>
          <div class="item-desc">
            Bullish: Volume â†‘ vÉ™ davamlÄ±, impuls â€œnÉ™fÉ™s alÄ±râ€.<br>
            Bearish: Pump sonrasÄ± volume Ã§Ã¶kÃ¼r â†’ bir dÉ™fÉ™lik spike.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Volume trendi dÉ™stÉ™klÉ™yir</button>
            <button class="item-btn" onclick="setScore(this,0)">Normal / qarÄ±ÅŸÄ±q</button>
            <button class="item-btn" onclick="setScore(this,-1)">Volume tÉ™rsinÉ™ iÅŸlÉ™yir</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: HÉ™rÉ™kÉ™t sonrasÄ± volume kÉ™silirsÉ™, ehtiyatlÄ± ol.</div>
        </div>

        <div class="item" data-id="11">
          <div class="item-title">BLOCK 3 â€” Spot Orderbook</div>
          <div class="item-desc">
            Bullish: Real BID walls, spread daralÄ±r, absorption buy.<br>
            Bearish: ASK walls, spoofing (ghost orders) hiss olunur.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Orderbook mÉ™ni qoruyur</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / boÅŸdur</button>
            <button class="item-btn" onclick="setScore(this,-1)">Orderbook mÉ™nÉ™ qarÅŸÄ±</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: â€œDivarlarÄ±nâ€ real olub-olmadÄ±ÄŸÄ±nÄ± hiss et (tez Ã§É™kilib-silinirmi?).</div>
        </div>

        <div class="item" data-id="12">
          <div class="item-title">BLOCK 4 â€” Spot Price Action</div>
          <div class="item-desc">
            Bullish siqnallar: HH/HL structure, low sweep â†’ reclaim, bullish OB retest.<br>
            Bearish siqnallar: LH/LF, high sweep â†’ reject, bearish OB retest.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">PA trendi dÉ™stÉ™klÉ™yir</button>
            <button class="item-btn" onclick="setScore(this,0)">Range / qarÄ±ÅŸÄ±q</button>
            <button class="item-btn" onclick="setScore(this,-1)">PA É™leyhinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Son struktur break-lÉ™rinÉ™ (BOS, sweep) diqqÉ™t et.</div>
        </div>

      </div>
    </div>

    <!-- SECTION 3 â€” EXTRA PRO INDICATORS -->
    <div class="section" data-section="3">
      <div class="section-header">
        <div class="section-title">
          ğŸŸª BÃ¶lmÉ™ 3 â€” Extra PRO Indicators
          <span class="badge">Trend davam etmÉ™ testi</span>
        </div>
        <div class="section-score">
          Score: <span class="score-value" id="score-sec-3">0</span> / 6
          <span class="collapse-icon">â–¼</span>
        </div>
      </div>
      <div class="items">

        <div class="item" data-id="13">
          <div class="item-title">1) CVD (Cumulative Volume Delta)</div>
          <div class="item-desc">
            Bullish: CVD â†‘ vÉ™ Price â†‘ â†’ healthy trend.<br>
            Kritik: Price â†‘ amma CVD â†“ â†’ fake pump / absorption sell.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">CVD price ilÉ™ eyni tÉ™rÉ™fdÉ™</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral</button>
            <button class="item-btn" onclick="setScore(this,-1)">CVD tÉ™rsinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: CVD divergence varsa, ehtiyatlÄ± ol.</div>
        </div>

        <div class="item" data-id="14">
          <div class="item-title">2) Liquidation Heatmap</div>
          <div class="item-desc">
            Bullish: YuxarÄ±da likvidity cluster (maqnit) â†’ continuation.<br>
            Bearish: YuxarÄ±da boÅŸluq, aÅŸaÄŸÄ±da cluster â†’ drop riski.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Likvidlik hÉ™dÉ™fim tÉ™rÉ™fdÉ™dir</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / uzaqdÄ±r</button>
            <button class="item-btn" onclick="setScore(this,-1)">Likvidlik É™ks tÉ™rÉ™fdÉ™dir</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Major cluster sÉ™nin direction-Ä± dÉ™stÉ™klÉ™yirmi?</div>
        </div>

        <div class="item" data-id="15">
          <div class="item-title">3) VWAP (Institution Anchor)</div>
          <div class="item-desc">
            Bullish: Price &gt; VWAP, VWAP retest entry Ã¼Ã§Ã¼n ideal.<br>
            Bearish: Price &lt; VWAP â†’ trend zÉ™if / short bias.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">MÉ™n VWAP tÉ™rÉ™fi ilÉ™ gedirÉ™m</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral</button>
            <button class="item-btn" onclick="setScore(this,-1)">VWAP É™leyhimÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: VWAP-dan Ã§ox uzaq vÉ™ É™ks tÉ™rÉ™fdÉ™sÉ™, risk yÃ¼ksÉ™kdir.</div>
        </div>

        <div class="item" data-id="16">
          <div class="item-title">4) Tape Reading â€” Time &amp; Sales</div>
          <div class="item-desc">
            Bullish: ArdÄ±cÄ±l yaÅŸÄ±l, 50kâ€“300k buys, print-lÉ™r sÃ¼rÉ™tlÉ™nir.<br>
            Bearish: QÄ±rmÄ±zÄ± high-size prints, spoofing signs.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Tape mÉ™nim tÉ™rÉ™fimdÉ™dir</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / qarÄ±ÅŸÄ±q</button>
            <button class="item-btn" onclick="setScore(this,-1)">Tape É™leyhimÉ™dir</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: â€œKim daha aqressivdir?â€ sualÄ±na cavab tap.</div>
        </div>

        <div class="item" data-id="17">
          <div class="item-title">5) Funding Curve</div>
          <div class="item-desc">
            Bullish: Funding stabil vÉ™ ya mÉ™nfi, amma trend â†‘.<br>
            Bearish: Current funding â†“ amma future funding â†‘ â†’ trap pattern.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Funding mÉ™nÉ™ uyÄŸun</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / zÉ™if</button>
            <button class="item-btn" onclick="setScore(this,-1)">Funding trap hiss olunur</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Funding dÉ™yiÅŸmÉ™ trayektoriyasÄ±na bax, tÉ™k snapshot-a yox.</div>
        </div>

        <div class="item" data-id="18">
          <div class="item-title">6) Implied Volatility (IV)</div>
          <div class="item-desc">
            Bullish: IV â†‘ + Price â†‘ â†’ impuls saÄŸlam, oynaqdÄ±r.<br>
            Bearish: IV â†“ + Price â†‘ â†’ trend yorulub, Ã§Ä±xmaq vaxtÄ±dÄ±r.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">IV trendi dÉ™stÉ™klÉ™yir</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral</button>
            <button class="item-btn" onclick="setScore(this,-1)">IV É™leyhinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: IV bÃ¶yÃ¼k dÃ¼ÅŸÃ¼bsÉ™, artÄ±q â€œaxÄ±r metrosunaâ€ minmiÅŸ ola bilÉ™rsÉ™n.</div>
        </div>

      </div>
    </div>

    <!-- SECTION 4 â€” MARKET STRUCTURE -->
    <div class="section" data-section="4">
      <div class="section-header">
        <div class="section-title">
          ğŸŸ¥ BÃ¶lmÉ™ 4 â€” Market Structure (Macro & Micro)
          <span class="badge">4H + local struktur</span>
        </div>
        <div class="section-score">
          Score: <span class="score-value" id="score-sec-4">0</span> / 2
          <span class="collapse-icon">â–¼</span>
        </div>
      </div>
      <div class="items">

        <div class="item" data-id="19">
          <div class="item-title">1) 4H Macro Trend (EMA 50/200)</div>
          <div class="item-desc">
            Bullish regime: Price 4H EMA 50/200 Ã¼stÃ¼ndÉ™; reclaim â†’ É™n gÃ¼clÃ¼ siqnallardan biridir.<br>
            Bearish regime: AÅŸaÄŸÄ±sÄ±nda â†’ short bias.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Trade 4H rejimi ilÉ™ uyÄŸundur</button>
            <button class="item-btn" onclick="setScore(this,0)">RejimdÉ™n É™ksinÉ™, amma qÄ±sa scalp</button>
            <button class="item-btn" onclick="setScore(this,-1)">Rejim tam É™leyhinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Macro rejimÉ™ qarÅŸÄ± full-size girmÉ™.</div>
        </div>

        <div class="item" data-id="20">
          <div class="item-title">2) Market Structure Zonal Rules</div>
          <div class="item-desc">
            Bullish: BOS up, FVG fill + continue, demand sweep â†’ reclaim.<br>
            Bearish: BOS down, supply retest, fail swing high â†’ continuation.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">Local struktur setup-Ä± dÉ™stÉ™klÉ™yir</button>
            <button class="item-btn" onclick="setScore(this,0)">Range / unclear</button>
            <button class="item-btn" onclick="setScore(this,-1)">Struktur É™leyhinÉ™</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: Son BOS vÉ™ sweep-lÉ™rÉ™ É™sasÉ™n, trade zonanÄ± dÃ¼zgÃ¼n seÃ§.</div>
        </div>

      </div>
    </div>

    <!-- SECTION 5 â€” BTC REGIME -->
    <div class="section" data-section="5">
      <div class="section-header">
        <div class="section-title">
          ğŸŸ§ BÃ¶lmÉ™ 5 â€” BTC Regime Filter
          <span class="badge">AltcoinlÉ™r Ã¼Ã§Ã¼n MUST</span>
        </div>
        <div class="section-score">
          Score: <span class="score-value" id="score-sec-5">0</span> / 1
          <span class="collapse-icon">â–¼</span>
        </div>
      </div>
      <div class="items">

        <div class="item" data-id="21" data-hardfail="true">
          <div class="item-title">
            BTC Mood (OI, VWAP, Funding, Liquidity)
            <span class="item-hardfail-flag">HARD-FAIL potensialÄ±</span>
          </div>
          <div class="item-desc">
            Bullish reÅ¾im: BTC OI â†‘ + Price â†‘, VWAP Ã¼stÃ¼ndÉ™, yuxarÄ±da likvidity cluster.<br>
            Bearish/trap: BTC OI â†‘ + Price â†“, VWAP altÄ±nda, funding Ã§ox yÃ¼ksÉ™k.
          </div>
          <div class="item-actions">
            <button class="item-btn" onclick="setScore(this,1)">BTC mÉ™nim setup-Ä±mÄ± dÉ™stÉ™klÉ™yir</button>
            <button class="item-btn" onclick="setScore(this,0)">Neutral / yan</button>
            <button class="item-btn" onclick="setScore(this,-1)">BTC tam É™leyhdÉ™ (Trap riski)</button>
          </div>
          <div class="item-footer">TapÅŸÄ±rÄ±q: BTC É™leyhinÉ™dirsÉ™, altcoindÉ™ aggressiv olmaq olmaz.</div>
        </div>

      </div>
    </div>

    <!-- FINAL VERDICT CARD -->
    <div class="final-card">
      <div class="final-title">ğŸš€ Final Decision Map</div>
      <div class="final-score-line">
        Overall Score: <span id="finalScoreText" class="score-value">0 / 21</span>
      </div>
      <div id="finalVerdict" class="final-verdict">Status: No data</div>
      <div id="finalComment" class="final-note">
        Checklist-i doldur, nÉ™ticÉ™ burada PRO dildÉ™ Ã§Ä±xacaq. Unutma: bu sistem
        sÉ™nin Ã¶z analizini É™vÉ™z etmir, sadÉ™cÉ™ strukturlaÅŸdÄ±rÄ±r vÉ™ hard-fail trap-larÄ± flag edir.
      </div>

      <div class="export-box">
        <div class="export-label">Telegram Ã¼Ã§Ã¼n Export (copy â†’ paste):</div>
        <textarea id="exportText" readonly></textarea>
      </div>
    </div>

  </div>
</div>

<script>
  // COLLAPSE SECTIONS
  document.querySelectorAll(".section-header").forEach(hdr => {
    hdr.addEventListener("click", (e) => {
      // Buttons iÃ§indÉ™ kliklÉ™mÉ™sin
      if (e.target.closest("button")) return;
      const sec = hdr.closest(".section");
      if (!sec) return;
      sec.classList.toggle("collapsed");
    });
  });
  // Default: BÃ¶lmÉ™ 1 aÃ§Ä±q, 2-5 collapse
  document.querySelectorAll(".section[data-section]").forEach(sec => {
    const id = parseInt(sec.dataset.section || "0", 10);
    if (id > 1) sec.classList.add("collapsed");
  });

  function setScore(btn, score) {
    const itemEl = btn.closest(".item");
    if (!itemEl) return;

    itemEl.dataset.score = score;

    const buttons = itemEl.querySelectorAll(".item-btn");
    buttons.forEach(b => b.classList.remove("active-support","active-neutral","active-against"));

    if (score === 1) btn.classList.add("active-support");
    else if (score === 0) btn.classList.add("active-neutral");
    else if (score === -1) btn.classList.add("active-against");

    recompute();
  }

  function sectionMax(sectionId) {
    // According to design
    const map = {1:8, 2:4, 3:6, 4:2, 5:1};
    return map[sectionId] || 0;
  }

  function recompute() {
    let totalScore = 0;
    const sectionScores = {1:0,2:0,3:0,4:0,5:0};
    let hardFail = false;

    document.querySelectorAll(".item").forEach(item => {
      const s = parseInt(item.dataset.score || "0", 10);
      const sec = parseInt(item.closest(".section").dataset.section || "0", 10);
      if (!isNaN(sec) && sec > 0) {
        sectionScores[sec] = (sectionScores[sec] || 0) + s;
      }
      totalScore += s;

      if (s === -1 && item.dataset.hardfail === "true") {
        hardFail = true;
      }
    });

    for (let sec = 1; sec <=5; sec++) {
      const el = document.getElementById("score-sec-" + sec);
      if (el) {
        el.textContent = sectionScores[sec] + " / " + sectionMax(sec);
      }
    }

    document.getElementById("overallScore").textContent = totalScore;
    document.getElementById("finalScoreText").textContent = totalScore + " / 21";

    // Hard-Fail status view
    const hfStatus = document.getElementById("hfStatus");
    if (hardFail) {
      hfStatus.textContent = "Hard-Fail: VAR";
      hfStatus.classList.remove("hf-ok");
      hfStatus.classList.add("hf-bad");
    } else {
      hfStatus.textContent = "Hard-Fail: Yox";
      hfStatus.classList.remove("hf-bad");
      hfStatus.classList.add("hf-ok");
    }

    // Verdict mapping
    let verdict = "";
    let comment = "";
    if (hardFail) {
      verdict = "âŒ HARD-FAIL â€” NO TRADE";
      comment = "BTC trap / OI dynamics kimi kritik indikatorlardan biri sÉ™nin setup-Ä±na qarÅŸÄ±dÄ±r. Score yÃ¼ksÉ™k olsa belÉ™ bu treydi SKIP ET. Daha tÉ™miz imkan gÃ¶zlÉ™.";
    } else if (totalScore >= 13) {
      verdict = "âœ… HIGH CONVICTION SETUP â€” PRO Entry Allowed";
      comment = "Futures impulse + Spot + Extra PRO + Struktur + BTC hamÄ±sÄ± sÉ™nin tÉ™rÉ™findÉ™dir. Bu nadir yÃ¼ksÉ™k keyfiyyÉ™tli setup-dÄ±r. YenÉ™ dÉ™ full risk deyil, planlÄ± SL vÉ™ Ã¶lÃ§Ã¼ ilÉ™ gir.";
    } else if (totalScore >= 7) {
      verdict = "ğŸŸ¢ OK / STRONG Setup â€” Normal Size";
      comment = "ÆksÉ™r bloklar sÉ™nin tÉ™rÉ™fini dÉ™stÉ™klÉ™yir. Entry mÃ¼mkÃ¼ndÃ¼r, amma zÉ™if olan bloklarÄ± (mÉ™sÉ™lÉ™n BTC vÉ™ ya Spot) nÉ™zÉ™rÉ™ al vÉ™ riskini buna gÃ¶rÉ™ azald.";
    } else if (totalScore >= 3) {
      verdict = "ğŸŸ¡ MIXED Setup â€” Only Small Size / Scout";
      comment = "BÉ™zi bloklar yaxÅŸÄ±, bÉ™zilÉ™ri É™leyhinÉ™dir. Bu daha Ã§ox test-trade / small size Ã¼Ã§Ã¼ndÃ¼r. Emosional all-in etmÉ™k qÉ™tiyyÉ™n dÃ¼zgÃ¼n deyil.";
    } else if (totalScore >= 0) {
      verdict = "ğŸŸ§ NO-TRADE ZONE â€” Ã‡ox zÉ™if tÉ™sdiq";
      comment = "PRO xÉ™ritÉ™yÉ™ gÃ¶rÉ™ kifayÉ™t qÉ™dÉ™r alignment yoxdur. SÉ™br edib daha tÉ™miz vÉ™ daha gÃ¼clÃ¼ setup gÃ¶zlÉ™mÉ™k uzun mÃ¼ddÉ™tdÉ™ daha sÉ™rfÉ™lidir.";
    } else {
      verdict = "ğŸ”´ AVOID / CONTRARIAN ONLY";
      comment = "Ãœmumi skor mÉ™nfidir. Bu ya tam É™leyhinÉ™ siqnaldÄ±r, ya da yalnÄ±z Ã§ox tÉ™crÃ¼bÉ™li kontrarian Ã¼Ã§Ã¼n qÄ±sa scalp dÉ™yÉ™r. Normal treyd Ã¼Ã§Ã¼n uyÄŸun deyil.";
    }

    document.getElementById("finalVerdict").textContent = verdict;
    document.getElementById("finalComment").textContent = comment;

    buildExport(sectionScores, totalScore, verdict, hardFail);
  }

  function resetAll() {
    document.querySelectorAll(".item").forEach(item => {
      delete item.dataset.score;
      const buttons = item.querySelectorAll(".item-btn");
      buttons.forEach(b => b.classList.remove("active-support","active-neutral","active-against"));
    });
    recompute();
    document.getElementById("exportText").value = "";
  }

  function buildExport(sectionScores, totalScore, verdict, hardFail) {
    let text = "";
    text += "ğŸ“Œ PRO Trend Verification â€” FULL MODE V2\n";
    text += "----------------------------------------\n";
    text += "ğŸŸ¦ Futures Impulse: " + sectionScores[1] + " / 8\n";
    text += "ğŸŸ© Spot Confirmation: " + sectionScores[2] + " / 4\n";
    text += "ğŸŸª Extra PRO: " + sectionScores[3] + " / 6\n";
    text += "ğŸŸ¥ Market Structure: " + sectionScores[4] + " / 2\n";
    text += "ğŸŸ§ BTC Regime: " + sectionScores[5] + " / 1\n\n";
    text += "ğŸ“Š Overall Score: " + totalScore + " / 21\n";
    text += "âš™ï¸ Hard-Fail: " + (hardFail ? "VAR (NO-TRADE)\n" : "Yox\n");
    text += "ğŸ§¾ Verdict: " + verdict + "\n";

    document.getElementById("exportText").value = text;
  }

  function exportSummary() {
    const ta = document.getElementById("exportText");
    ta.focus();
    ta.select();
  }

  // init
  recompute();
</script>
</body>
</html>
